@model Cinema.ViewModels.Admin.ChangeCinemaApprovalStatusViewModel

<div class="delete-cinema-form d-flex justify-content-center align-items-center">
    <div class="delete-text d-flex flex-column">
        <h5 style="color: white;">Are you sure you want to change this cinema's approval status?</h5>
        <div class="form-group">
            <div class="active-form">
                <i class="fa-solid fa-film input-icon"></i>
                <span class="text-white px-2">@Model.Name</span>
            </div>
        </div>
        <select id="status-selector" class="status-selector" name="approvalCode" asp-for="ApprovalCode">
            <option value="@((int)ApprovalStatus.Approved)">Approved</option>
            <option value="@((int)ApprovalStatus.PendingApproval)">Pending approval</option>
            <option value="@((int)ApprovalStatus.DeniedApproval)">Denied approval</option>
        </select>
        <button type="button" class="app-content-headerButton" onclick="submit()">Change</button>
    </div>
    <div class="delete-image form-group mx-0">
        <img src="~/client-images/Cinemas/@Model.ImageUrl" />
    </div>
</div>
<script>
    function submit() {
        $.ajax({
            type: "POST",
            url: `/Admin/ChangeApprovalStatus`,
            data: { id: '@Model.Id', approvalCode: document.getElementById("status-selector").value },
            success: function (response) {
                window.location.href = response.redirectToUrl;
            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }
</script>